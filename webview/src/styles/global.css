/* VisualPy Block Editor â€” Global Styles
 * Integrates with VS Code theme tokens for native look & feel.
 * Uses CSS custom properties for block colors and state.
 */

/* === Reset & Base === */
*,
*::before,
*::after {
    box-sizing: border-box;
    padding: 0;
}

/* Supresses default focus outline (yellow ring) on all elements */
*:focus,
*:focus-visible {
    outline: none !important;
}

:root {
    /* VS Code theme integration */
    --vp-bg: var(--vscode-editor-background, #1e1e1e);
    --vp-fg: var(--vscode-editor-foreground, #cccccc);
    --vp-border: var(--vscode-panel-border, #2d2d2d);
    --vp-focus: var(--vscode-focusBorder, #3B82F6);
    --vp-hover: var(--vscode-list-hoverBackground, rgba(255, 255, 255, 0.05));
    --vp-active: var(--vscode-list-activeSelectionBackground, #094771);
    --vp-input-bg: var(--vscode-input-background, #3c3c3c);
    --vp-input-fg: var(--vscode-input-foreground, #cccccc);
    --vp-input-border: var(--vscode-input-border, #3c3c3c);
    --vp-button-bg: var(--vscode-button-background, #0e639c);
    --vp-button-fg: var(--vscode-button-foreground, #ffffff);
    --vp-button-hover: var(--vscode-button-hoverBackground, #1177bb);
    --vp-badge-bg: var(--vscode-badge-background, #4d4d4d);
    --vp-badge-fg: var(--vscode-badge-foreground, #ffffff);
    --vp-font: var(--vscode-font-family, 'Segoe UI', system-ui, sans-serif);
    --vp-font-size: var(--vscode-font-size, 13px);
    --vp-mono: var(--vscode-editor-font-family, 'Cascadia Code', 'Consolas', monospace);
    --vp-mono-size: var(--vscode-editor-font-size, 13px);

    /* Custom tokens */
    --vp-radius: 6px;
    --vp-radius-sm: 4px;
    --vp-shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.12);
    --vp-shadow-md: 0 4px 8px rgba(0, 0, 0, 0.15);
    --vp-shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.25);
    --vp-transition: 150ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
    --vp-transition-fast: 100ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
    --vp-spring: cubic-bezier(0.25, 1.0, 0.5, 1.0);
    --vp-spring-duration: 350ms;
}

html,
body {
    height: 100%;
    overflow: hidden;
    background: var(--vp-bg);
    color: var(--vp-fg);
    font-family: var(--vp-font);
    font-size: var(--vp-font-size);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* === Scrollbar Styling === */
::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-corner {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: var(--vscode-scrollbarSlider-background, rgba(121, 121, 121, 0.4));
    border-radius: 10px;
    border: 2px solid transparent;
    background-clip: content-box;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--vscode-scrollbarSlider-hoverBackground, rgba(100, 100, 100, 0.7));
    border: 2px solid transparent;
    background-clip: content-box;
}

::-webkit-scrollbar-thumb:active {
    background: var(--vscode-scrollbarSlider-activeBackground, rgba(191, 191, 191, 0.4));
    border: 2px solid transparent;
    background-clip: content-box;
}

/* === Animations === */
@keyframes vp-fade-in {
    from {
        opacity: 0;
        transform: translateY(-4px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes vp-scale-in {
    from {
        opacity: 0;
        transform: scale(0.96);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes vp-pulse {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.5;
    }
}

@keyframes vp-slide-down {
    from {
        opacity: 0;
        transform: translateY(-8px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes vp-shimmer {
    0% {
        background-position: -200% center;
    }

    100% {
        background-position: 200% center;
    }
}

/* === Block Color Variables (set per-block via style attribute) === */
/* These come from the BLOCK_COLORS map */

/* === Ghost Drag Styles === */
.vp-drag-ghost {
    filter: saturate(1.1);
    opacity: 0.8;
}

.vp-drag-ghost .ghost-clone {
    border: 2px solid var(--vp-focus);
    box-shadow: var(--vp-shadow-lg);
}

/* === Drop Indicator === */
.vp-drop-indicator {
    animation: vp-pulse 1.2s ease-in-out infinite;
}

/* === Utility Classes === */
.vp-visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    border: 0;
}

/* === Selection prevention during drag === */
body.is-dragging {
    user-select: none;
    -webkit-user-select: none;
    cursor: grabbing !important;
}

body.is-dragging * {
    cursor: grabbing !important;
}

/* === Trash Zone Animations === */
@keyframes vp-trash-bounce-in {
    0% {
        transform: scale(1);
    }

    30% {
        transform: scale(1.18);
    }

    50% {
        transform: scale(1.06);
    }

    70% {
        transform: scale(1.14);
    }

    100% {
        transform: scale(1.12);
    }
}

@keyframes vp-trash-bounce-out {
    0% {
        transform: scale(1.12);
    }

    40% {
        transform: scale(0.95);
    }

    100% {
        transform: scale(1);
    }
}

@keyframes vp-trash-pulse {

    0%,
    100% {
        box-shadow: 0 0 20px rgba(239, 68, 68, 0.2);
    }

    50% {
        box-shadow: 0 0 35px rgba(239, 68, 68, 0.35);
    }
}